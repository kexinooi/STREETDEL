<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blogs & Articles</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="blogstyle/style2.css" />
    <link rel="stylesheet" href="global.css">
  </head>
  <body>
    <!-- HEADER -->
    <header class="header-title-container">
      <div class="pro-container">
        <div class="title-nav-container">
          <a href="index.html"><h1>StreetDeli.</h1></a>
          <img
            src="img/nav2.jpg"
            width="25"
            height="25"
            alt="Navigation menu"
            class="nav-icon"
            onclick="toggleMenu()"
          />
        </div>
        <div class="icons">
          <span
            id="displayEmail"
            style="font-size: 20px; font-weight: bold; margin-right: 10px"
          ></span>
          <img
            class="profile-icon"
            id="profileIcon"
            src="img/pro2.png"
            width="40"
            height="40"
            alt="User profile"
          />
        </div>
      </div>
    </header>
    <hr />

    <!-- Dark Mode Toggle -->
    <div id="theme-toggle" title="Toggle Dark/Light Mode">
      <i class="bi bi-sun-fill"></i>
    </div>
    <!-- MAIN CONTENT -->
    <main>
      <!-- Breadcrumb -->
      <nav id="browse-route" aria-label="Breadcrumb">
        <a href="index.html">Home</a> /
        <a href="blogs.html">Blogs & Articles</a> /
        <span>Johor Street Food: Southern Flavors, Rich & Authentic</span>
      </nav>
      <!-- Article -->
      <article class="articles-container">
        <header>
          <h2>Johor Street Food: Southern Flavors, Rich & Authentic</h2>
        </header>

        <p class="cnt1">
          Johor’s street food reflects the region’s rich cultural mix—Malay,
          Chinese, and Indian influences combine to create bold, flavorful
          dishes that are both hearty and comforting. From bustling markets to
          roadside stalls, Johor’s offerings are a delight for any food lover.
        </p>

        <div class="img-layout">
          <figure class="img-main">
            <img src="img/nb.jpg" alt="Nasi Briyani" />
            <figcaption>Nasi Briyani</figcaption>
          </figure>
          <figure class="img-side">
            <img src="img/lsjhr.jpg" alt="Laksa Johor" />
            <figcaption>Laksa Johor</figcaption>
          </figure>
          <figure class="img-side">
            <img src="img/otot.jpg" alt="Otak-Otak" />
            <figcaption>Otak-Otak</figcaption>
          </figure>
        </div>

        <section class="cnt2">
          <h4>Must-Try Street Foods in Johor:</h4>
          <ul>
            <li>
              <strong>Nasi Briyani</strong> – Fragrant basmati rice cooked with
              spices and served with curried meat, hard-boiled eggs, and a side
              of pickles.
            </li>
            <li>
              <strong>Laksa Johor</strong>– Thick spaghetti-like noodles in a
              rich fish and coconut gravy, topped with shredded cucumber, bean
              sprouts, and fresh herbs.
            </li>
            <li>
              <strong>Otak-Otak</strong>– Spicy fish paste wrapped in banana
              leaves and grilled over charcoal for a smoky flavor.
            </li>
            <li>
              <strong>Mee Rebus</strong> – Yellow noodles served in a slightly
              sweet and spicy potato-based gravy, garnished with boiled eggs,
              tofu, and lime.
            </li>
          </ul>
        </section>

        <section class="cnt3">
          <h4>Best Spots to Explore:</h4>
          <ul>
            <li>
              <strong>Kota Tinggi Market</strong>– Known for local Malay
              delights including Nasi Briyani and Laksa Johor.
            </li>
            <li>
              <strong>Johor Bahru Night Market (Pasar Karat)</strong>– A mix of
              traditional snacks, desserts, and grilled specialties.
            </li>
            <li>
              <strong>Muar Riverside</strong>– Famous for seafood-based street
              foods, especially Otak-Otak and grilled fish.
            </li>
          </ul>
        </section>
      </article>

      <!-- SOCIAL MEDIA SHARE -->
      <div class="social-share-container">
        <p class="share-title">Share on:</p>

        <div class="social-sidebar">
          <!-- Facebook -->
          <a
            href="https://www.facebook.com/sharer/sharer.php?u=https://yourdomain.com/article.html"
            target="_blank"
            class="social-btn facebook"
            onclick="trackShare('facebook','blog1')"
          >
            <i class="bi bi-facebook"></i>
            <span class="share-count" id="facebook-blog1-count">0</span>
          </a>

          <!-- Twitter -->
          <a
            href="https://twitter.com/intent/tweet?url=https://yourdomain.com/article.html"
            target="_blank"
            class="social-btn twitter"
            onclick="trackShare('twitter','blog1')"
          >
            <i class="bi bi-twitter"></i>
            <span class="share-count" id="twitter-blog1-count">0</span>
          </a>

          <!-- WhatsApp -->
          <a
            href="https://api.whatsapp.com/send?text=Check%20this%20out:%20https://yourdomain.com/article.html"
            target="_blank"
            class="social-btn whatsapp"
            onclick="trackShare('whatsapp','blog1')"
          >
            <i class="bi bi-whatsapp"></i>
            <span class="share-count" id="whatsapp-blog1-count">0</span>
          </a>
        </div>
      </div>

      <!-- Bootstrap Icons -->
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      />

      <!-- Tags -->
      <section class="tag">
        <span>Tags:</span>
        <button type="button">Johor</button>
        <button type="button">Laksa</button>
        <button type="button">Mee Rebus</button>
      </section>

      <!-- Author -->
      <section class="author-info">
        <img src="img/fa1.jpg" alt="Author Julie Christie" />
        <div>
          <p class="aut-name">Julie Christie</p>
          <p class="aut-desc">
            A Malaysian writer and food enthusiast who loves exploring local
            street food and sharing the flavors of Malaysia with readers.
          </p>
        </div>
      </section>

      <!-- Previous / Next Navigation -->
      <section class="pre-next">
        <a href="blogsKl.html" class="pre">
          <img src="img/kl.jpg" alt="KL" />
          <div class="nav-content">
            <p class="pre-text">← Previous Post</p>
            <p class="pre-text-desc">
              Kuala Lumpur Street Food: Big City, Bold Flavors
            </p>
          </div>
        </a>
        <a href="recipe.html" class="next">
          <img src="img/nasilemak.jpg" alt="Nasi Lemak" />
          <div class="nav-content">
            <p class="next-text">Next Post →</p>
            <p class="next-text-desc">
              Recipe — How to Make Authentic Malaysian Nasi Lemak
            </p>
          </div>
        </a>
      </section>

      <!-- FOOTER SECTION -->
      <div id="footer-placeholder"></div>
    </main>

    <script>
      function toggleMenu() {
        const menu = document.getElementById("overlay-menu");
        if (menu.style.display === "block") {
          menu.style.display = "none";
        } else {
          menu.style.display = "block";
        }
      }
      // Load menu dynamically
      fetch("menu.html")
        .then((response) => response.text())
        .then((data) => {
          document.body.insertAdjacentHTML("beforeend", data);

          // Now elements exist, safe to select them
          const toggleBtn = document.getElementById("theme-toggle");
          const navIcon = document.querySelector(".nav-icon");
          const profileIcon = document.querySelector(".profile-icon");

          // Load saved mode
          if (localStorage.getItem("theme") === "dark") {
            document.body.classList.add("dark-mode");
            if (navIcon) navIcon.src = "img/nav.jpg";
            if (profileIcon) profileIcon.src = "img/pro2.png";
          } else {
            if (navIcon) navIcon.src = "img/nav2.png";
            if (profileIcon) profileIcon.src = "img/profile.png";
          }

          // Toggle on click
          if (toggleBtn) {
            toggleBtn.addEventListener("click", () => {
              document.body.classList.toggle("dark-mode");

              if (document.body.classList.contains("dark-mode")) {
                localStorage.setItem("theme", "dark");
                if (navIcon) navIcon.src = "img/nav.jpg";
                if (profileIcon) profileIcon.src = "img/pro2.png";
              } else {
                localStorage.setItem("theme", "light");
                if (navIcon) navIcon.src = "img/nav2.png";
                if (profileIcon) profileIcon.src = "img/profile";
              }
            });
          }
        });

      // Load footer dynamically
      fetch("footer.html")
        .then((response) => response.text())
        .then((data) => {
          const footerPlaceholder =
            document.getElementById("footer-placeholder");
          if (footerPlaceholder) footerPlaceholder.innerHTML = data;
        });
    </script>

    <script>
      const API_BASE =
        "https://streetdelic-fbg0gchtavakeqhg.canadacentral-01.azurewebsites.net/api";
      const articleId = "blog1"; // unique ID for the article

      // Load share counts
      async function loadShareCounts() {
        try {
          const res = await fetch(`${API_BASE}/share/${articleId}`);
          if (!res.ok) throw new Error("Failed to load share counts");
          const data = await res.json();

          data.forEach((d) => {
            const span = document.getElementById(
              `${d.Platform.toLowerCase()}-${articleId}-count`
            );
            if (span) span.textContent = d.Count;
          });
        } catch (err) {
          console.error("Error loading share counts:", err);
        }
      }

      // Track share click
      async function trackShare(platform, articleId) {
        try {
          await fetch(`${API_BASE}/share`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ platform, articleId }),
          });
          loadShareCounts(); // refresh counts
        } catch (err) {
          console.error("Error tracking share:", err);
        }
      }

      window.addEventListener("DOMContentLoaded", loadShareCounts);
    </script>
    <script src="auth2.js"></script>
  </body>
</html>
